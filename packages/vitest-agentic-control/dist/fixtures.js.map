{"version":3,"sources":["../src/fixtures.ts"],"names":[],"mappings":"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","file":"fixtures.js","sourcesContent":["/**\n * Test fixtures for agentic-control testing.\n *\n * This module provides pre-configured test fixtures for common\n * agentic-control configurations, making it easy to set up tests.\n *\n * @module fixtures\n */\n\n/**\n * Options for creating test configurations.\n */\nexport interface TestConfigOptions {\n  /** Log level */\n  logLevel?: 'debug' | 'info' | 'warn' | 'error';\n  /** Whether to enable token configuration */\n  tokens?: boolean;\n  /** Whether to enable fleet configuration */\n  fleet?: boolean;\n  /** Whether to enable triage configuration */\n  triage?: boolean;\n  /** Whether to enable sandbox configuration */\n  sandbox?: boolean;\n}\n\n/**\n * Token configuration for testing.\n */\nexport interface TestTokenConfig {\n  organizations: Record<\n    string,\n    {\n      name: string;\n      tokenEnvVar: string;\n    }\n  >;\n  defaultTokenEnvVar: string;\n  prReviewTokenEnvVar: string;\n}\n\n/**\n * Fleet configuration for testing.\n */\nexport interface TestFleetConfig {\n  autoCreatePr: boolean;\n  concurrency: number;\n  timeout: number;\n}\n\n/**\n * Triage configuration for testing.\n */\nexport interface TestTriageConfig {\n  provider: 'anthropic' | 'openai' | 'google' | 'mistral' | 'azure' | 'ollama';\n  model: string;\n  maxTokens: number;\n  temperature: number;\n}\n\n/**\n * Sandbox configuration for testing.\n */\nexport interface TestSandboxConfig {\n  runtime: 'claude' | 'cursor' | 'custom';\n  image: string;\n  memory: number;\n  timeout: number;\n  workdir: string;\n}\n\n/**\n * Full test configuration.\n */\nexport interface TestConfig {\n  logLevel: 'debug' | 'info' | 'warn' | 'error';\n  tokens?: TestTokenConfig;\n  fleet?: TestFleetConfig;\n  triage?: TestTriageConfig;\n  sandbox?: TestSandboxConfig;\n}\n\n/**\n * Create a test configuration with sensible defaults.\n *\n * @param options - Configuration options\n * @returns A test configuration object\n *\n * @example\n * ```typescript\n * import { createTestConfig } from 'vitest-agentic-control';\n *\n * const config = createTestConfig({\n *   logLevel: 'debug',\n *   tokens: true,\n *   fleet: true,\n * });\n *\n * // Use in your tests\n * expect(config.tokens?.organizations).toBeDefined();\n * ```\n */\nexport function createTestConfig(options: TestConfigOptions = {}): TestConfig {\n  const config: TestConfig = {\n    logLevel: options.logLevel ?? 'info',\n  };\n\n  if (options.tokens !== false) {\n    config.tokens = createTokenConfig();\n  }\n\n  if (options.fleet) {\n    config.fleet = createFleetConfig();\n  }\n\n  if (options.triage) {\n    config.triage = createTriageConfig();\n  }\n\n  if (options.sandbox) {\n    config.sandbox = createSandboxConfig();\n  }\n\n  return config;\n}\n\n/**\n * Create a token configuration for testing.\n *\n * @param overrides - Optional overrides\n * @returns Token configuration\n *\n * @example\n * ```typescript\n * import { createTokenConfig } from 'vitest-agentic-control';\n *\n * const tokens = createTokenConfig({\n *   organizations: {\n *     'my-org': { name: 'my-org', tokenEnvVar: 'MY_ORG_TOKEN' },\n *   },\n * });\n * ```\n */\nexport function createTokenConfig(overrides: Partial<TestTokenConfig> = {}): TestTokenConfig {\n  return {\n    organizations: overrides.organizations ?? {\n      'test-org': {\n        name: 'test-org',\n        tokenEnvVar: 'TEST_ORG_TOKEN',\n      },\n      'another-org': {\n        name: 'another-org',\n        tokenEnvVar: 'ANOTHER_ORG_TOKEN',\n      },\n    },\n    defaultTokenEnvVar: overrides.defaultTokenEnvVar ?? 'GITHUB_TOKEN',\n    prReviewTokenEnvVar: overrides.prReviewTokenEnvVar ?? 'GITHUB_TOKEN',\n  };\n}\n\n/**\n * Create a fleet configuration for testing.\n *\n * @param overrides - Optional overrides\n * @returns Fleet configuration\n *\n * @example\n * ```typescript\n * import { createFleetConfig } from 'vitest-agentic-control';\n *\n * const fleet = createFleetConfig({\n *   concurrency: 5,\n *   timeout: 60000,\n * });\n * ```\n */\nexport function createFleetConfig(overrides: Partial<TestFleetConfig> = {}): TestFleetConfig {\n  return {\n    autoCreatePr: overrides.autoCreatePr ?? false,\n    concurrency: overrides.concurrency ?? 3,\n    timeout: overrides.timeout ?? 30000,\n  };\n}\n\n/**\n * Create a triage configuration for testing.\n *\n * @param overrides - Optional overrides\n * @returns Triage configuration\n *\n * @example\n * ```typescript\n * import { createTriageConfig } from 'vitest-agentic-control';\n *\n * const triage = createTriageConfig({\n *   provider: 'openai',\n *   model: 'gpt-4',\n * });\n * ```\n */\nexport function createTriageConfig(overrides: Partial<TestTriageConfig> = {}): TestTriageConfig {\n  return {\n    provider: overrides.provider ?? 'anthropic',\n    model: overrides.model ?? 'claude-sonnet-4-20250514',\n    maxTokens: overrides.maxTokens ?? 4096,\n    temperature: overrides.temperature ?? 0.7,\n  };\n}\n\n/**\n * Create a sandbox configuration for testing.\n *\n * @param overrides - Optional overrides\n * @returns Sandbox configuration\n *\n * @example\n * ```typescript\n * import { createSandboxConfig } from 'vitest-agentic-control';\n *\n * const sandbox = createSandboxConfig({\n *   runtime: 'cursor',\n *   memory: 1024,\n * });\n * ```\n */\nexport function createSandboxConfig(overrides: Partial<TestSandboxConfig> = {}): TestSandboxConfig {\n  return {\n    runtime: overrides.runtime ?? 'claude',\n    image: overrides.image ?? 'node:22-slim',\n    memory: overrides.memory ?? 512,\n    timeout: overrides.timeout ?? 30000,\n    workdir: overrides.workdir ?? '/workspace',\n  };\n}\n\n/**\n * Environment variable setup for testing.\n */\nexport interface TestEnvSetup {\n  /** GitHub token */\n  GITHUB_TOKEN?: string;\n  /** Anthropic API key */\n  ANTHROPIC_API_KEY?: string;\n  /** OpenAI API key */\n  OPENAI_API_KEY?: string;\n  /** Test organization token */\n  TEST_ORG_TOKEN?: string;\n  /** Another organization token */\n  ANOTHER_ORG_TOKEN?: string;\n  /** PR review token */\n  PR_REVIEW_TOKEN?: string;\n  /** Additional environment variables */\n  [key: string]: string | undefined;\n}\n\n/**\n * Default test environment variables.\n */\nexport const DEFAULT_TEST_ENV: TestEnvSetup = {\n  GITHUB_TOKEN: 'ghp_test_token_12345',\n  ANTHROPIC_API_KEY: 'sk-ant-test-key-12345',\n  OPENAI_API_KEY: 'sk-test-key-12345',\n  TEST_ORG_TOKEN: 'ghp_test_org_token_12345',\n  ANOTHER_ORG_TOKEN: 'ghp_another_org_token_12345',\n  PR_REVIEW_TOKEN: 'ghp_pr_review_token_12345',\n};\n\n/**\n * Set up test environment variables and return cleanup function.\n *\n * @param env - Environment variables to set\n * @returns Cleanup function to restore original values\n *\n * @example\n * ```typescript\n * import { withTestEnv, DEFAULT_TEST_ENV } from 'vitest-agentic-control';\n * import { beforeEach, afterEach } from 'vitest';\n *\n * describe('My Tests', () => {\n *   let cleanup: () => void;\n *\n *   beforeEach(() => {\n *     cleanup = withTestEnv(DEFAULT_TEST_ENV);\n *   });\n *\n *   afterEach(() => {\n *     cleanup();\n *   });\n *\n *   it('should use test tokens', () => {\n *     expect(process.env.GITHUB_TOKEN).toBe('ghp_test_token_12345');\n *   });\n * });\n * ```\n */\nexport function withTestEnv(env: TestEnvSetup = DEFAULT_TEST_ENV): () => void {\n  const original: Record<string, string | undefined> = {};\n\n  // Save original values and set new ones\n  for (const [key, value] of Object.entries(env)) {\n    original[key] = process.env[key];\n    if (value !== undefined) {\n      process.env[key] = value;\n    } else {\n      delete process.env[key];\n    }\n  }\n\n  // Return cleanup function\n  return () => {\n    for (const [key, value] of Object.entries(original)) {\n      if (value === undefined) {\n        delete process.env[key];\n      } else {\n        process.env[key] = value;\n      }\n    }\n  };\n}\n\n/**\n * Create a mock agent configuration for testing.\n *\n * @returns Agent configuration\n */\nexport function createMockAgentConfig(): {\n  name: string;\n  role: string;\n  goal: string;\n  backstory: string;\n} {\n  return {\n    name: 'test-agent',\n    role: 'Test Agent',\n    goal: 'Complete test tasks accurately and efficiently',\n    backstory: 'You are a helpful test agent designed for testing purposes.',\n  };\n}\n\n/**\n * Create a mock task configuration for testing.\n *\n * @returns Task configuration\n */\nexport function createMockTaskConfig(): {\n  name: string;\n  description: string;\n  expectedOutput: string;\n  agent: string;\n} {\n  return {\n    name: 'test-task',\n    description: 'Complete the test task by following the instructions.',\n    expectedOutput: 'A successful completion message.',\n    agent: 'test-agent',\n  };\n}\n\n/**\n * Create a mock crew configuration for testing.\n *\n * @returns Crew configuration\n */\nexport function createMockCrewConfig(): {\n  name: string;\n  description: string;\n  agents: Record<string, unknown>;\n  tasks: Record<string, unknown>;\n} {\n  return {\n    name: 'test-crew',\n    description: 'A test crew for testing purposes',\n    agents: {\n      'test-agent': createMockAgentConfig(),\n    },\n    tasks: {\n      'test-task': createMockTaskConfig(),\n    },\n  };\n}\n\n/**\n * Create a mock GitHub issue for testing.\n *\n * @param overrides - Optional overrides\n * @returns GitHub issue object\n */\nexport function createMockGitHubIssue(\n  overrides: Partial<{\n    number: number;\n    title: string;\n    body: string;\n    state: 'open' | 'closed';\n    labels: string[];\n  }> = {}\n): {\n  number: number;\n  title: string;\n  body: string;\n  state: 'open' | 'closed';\n  labels: Array<{ name: string }>;\n  user: { login: string };\n  created_at: string;\n  updated_at: string;\n} {\n  return {\n    number: overrides.number ?? 1,\n    title: overrides.title ?? 'Test Issue',\n    body: overrides.body ?? 'This is a test issue body.',\n    state: overrides.state ?? 'open',\n    labels: (overrides.labels ?? ['bug']).map((name) => ({ name })),\n    user: { login: 'test-user' },\n    created_at: new Date().toISOString(),\n    updated_at: new Date().toISOString(),\n  };\n}\n\n/**\n * Create a mock GitHub pull request for testing.\n *\n * @param overrides - Optional overrides\n * @returns GitHub pull request object\n */\nexport function createMockGitHubPR(\n  overrides: Partial<{\n    number: number;\n    title: string;\n    body: string;\n    state: 'open' | 'closed' | 'merged';\n    base: string;\n    head: string;\n    labels: string[];\n  }> = {}\n): {\n  number: number;\n  title: string;\n  body: string;\n  state: 'open' | 'closed';\n  merged: boolean;\n  base: { ref: string };\n  head: { ref: string };\n  labels: Array<{ name: string }>;\n  user: { login: string };\n  created_at: string;\n  updated_at: string;\n} {\n  const state = overrides.state ?? 'open';\n\n  return {\n    number: overrides.number ?? 1,\n    title: overrides.title ?? 'Test Pull Request',\n    body: overrides.body ?? 'This is a test PR body.',\n    state: state === 'merged' ? 'closed' : state,\n    merged: state === 'merged',\n    base: { ref: overrides.base ?? 'main' },\n    head: { ref: overrides.head ?? 'feature/test' },\n    labels: (overrides.labels ?? ['enhancement']).map((name) => ({ name })),\n    user: { login: 'test-user' },\n    created_at: new Date().toISOString(),\n    updated_at: new Date().toISOString(),\n  };\n}\n"]}