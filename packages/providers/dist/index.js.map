{"version":3,"sources":["../src/cursor.ts","../src/jules.ts","../src/ollama.ts"],"names":["DEFAULT_BASE_URL"],"mappings":"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","file":"index.js","sourcesContent":["/**\n * Cursor Cloud Agent Provider Implementation\n *\n * Creates agents that use Cursor Cloud Agents for expert-level tasks.\n * WARNING: Cursor Cloud Agents are expensive - use sparingly!\n */\n\nimport type { AgentCapabilities, AgentDefinition, AgentResult, AgentTask } from '@agentic/triage';\n\nexport interface CursorConfig {\n  /** Cursor API key */\n  apiKey: string;\n  /** API base URL (default: https://api.cursor.com/v0) */\n  baseUrl?: string;\n  /** Workspace path in the cloud environment */\n  workspacePath?: string;\n}\n\nexport interface CursorAgentResult {\n  /** Agent ID */\n  agentId: string;\n  /** Current status */\n  status: string;\n  /** Output messages */\n  messages?: Array<{ role: string; content: string }>;\n}\n\nconst DEFAULT_BASE_URL = 'https://api.cursor.com/v0';\n\n/**\n * Create a Cursor Cloud Agent for the registry\n *\n * ⚠️ EXPENSIVE - Requires explicit approval by default\n */\nexport function createCursorAgent(\n  id: string,\n  config: CursorConfig,\n  options: {\n    name?: string;\n    cost?: number;\n    priority?: number;\n    requiresApproval?: boolean;\n    capabilities?: Partial<AgentCapabilities>;\n  } = {}\n): AgentDefinition<CursorAgentResult> {\n  const baseUrl = config.baseUrl ?? DEFAULT_BASE_URL;\n\n  return {\n    id,\n    name: options.name ?? 'Cursor Cloud Agent',\n    cost: options.cost ?? 100, // Expensive!\n    priority: options.priority ?? 100, // Very low priority (last resort)\n    enabled: true,\n    requiresApproval: options.requiresApproval ?? true, // Require approval by default\n    capabilities: {\n      tiers: ['expert'], // Only for expert-level tasks\n      maxContext: 200000,\n      canCreatePR: true,\n      canExecute: true,\n      async: true,\n      ...options.capabilities,\n    },\n    execute: async (task: AgentTask): Promise<AgentResult<CursorAgentResult>> => {\n      try {\n        const response = await fetch(`${baseUrl}/agents`, {\n          method: 'POST',\n          headers: {\n            Authorization: `Bearer ${config.apiKey}`,\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            messages: [\n              {\n                role: 'user',\n                content: formatCursorPrompt(task),\n              },\n            ],\n            workspacePath: config.workspacePath,\n          }),\n        });\n\n        if (!response.ok) {\n          const error = await response.text();\n          return {\n            success: false,\n            error: `Cursor API error: ${response.status} - ${error}`,\n            escalate: false, // No more tiers to escalate to\n            cost: 0, // Don't charge for failed requests\n          };\n        }\n\n        const result = await response.json();\n\n        return {\n          success: true,\n          data: {\n            agentId: result.id ?? result.agentId,\n            status: result.status ?? 'running',\n            messages: result.messages,\n          },\n          jobId: result.id, // Caller should poll\n          cost: 100, // Charge for successful spawn\n        };\n      } catch (error) {\n        return {\n          success: false,\n          error: error instanceof Error ? error.message : 'Unknown error',\n          escalate: false,\n          cost: 0,\n        };\n      }\n    },\n  };\n}\n\n/**\n * Poll a Cursor agent for status\n */\nexport async function pollCursorAgent(\n  config: CursorConfig,\n  agentId: string\n): Promise<CursorAgentResult> {\n  const baseUrl = config.baseUrl ?? DEFAULT_BASE_URL;\n\n  const response = await fetch(`${baseUrl}/agents/${agentId}`, {\n    headers: {\n      Authorization: `Bearer ${config.apiKey}`,\n    },\n  });\n\n  if (!response.ok) {\n    throw new Error(`Failed to poll agent: ${response.status}`);\n  }\n\n  const result = await response.json();\n\n  return {\n    agentId: result.id,\n    status: result.status,\n    messages: result.messages,\n  };\n}\n\nfunction formatCursorPrompt(task: AgentTask): string {\n  return `You are an expert developer. Complete this complex task:\n\nTASK: ${task.description}\n\nREPOSITORY: ${task.repo ?? 'Unknown'}\n\nCONTEXT:\n${task.context}\n\nThis task was escalated to you because simpler approaches failed.\nTake your time, analyze carefully, and provide a complete solution.`;\n}\n","/**\n * Google Jules Provider Implementation\n *\n * Creates agents that use Google Jules for complex async tasks.\n * Jules can create PRs, run commands, and handle multi-file changes.\n */\n\nimport type { AgentCapabilities, AgentDefinition, AgentResult, AgentTask } from '@agentic/triage';\n\nexport interface JulesConfig {\n  /** Jules API key */\n  apiKey: string;\n  /** API base URL (default: https://jules.googleapis.com/v1alpha) */\n  baseUrl?: string;\n  /** Automation mode (default: AUTO_CREATE_PR) */\n  automationMode?: 'AUTOMATION_MODE_UNSPECIFIED' | 'AUTO_CREATE_PR' | 'MANUAL';\n}\n\nexport interface JulesSessionResult {\n  /** Session ID for polling */\n  sessionId: string;\n  /** Session name/resource path */\n  name: string;\n  /** Current state */\n  state: string;\n}\n\nconst DEFAULT_BASE_URL = 'https://jules.googleapis.com/v1alpha';\n\n/**\n * Create a Jules-based agent for the registry\n */\nexport function createJulesAgent(\n  id: string,\n  config: JulesConfig,\n  options: {\n    name?: string;\n    cost?: number;\n    priority?: number;\n    capabilities?: Partial<AgentCapabilities>;\n  } = {}\n): AgentDefinition<JulesSessionResult> {\n  const baseUrl = config.baseUrl ?? DEFAULT_BASE_URL;\n  const automationMode = config.automationMode ?? 'AUTO_CREATE_PR';\n\n  return {\n    id,\n    name: options.name ?? 'Google Jules',\n    cost: options.cost ?? 0, // Free tier\n    priority: options.priority ?? 10, // Lower priority than Ollama\n    enabled: true,\n    requiresApproval: false,\n    capabilities: {\n      tiers: ['moderate', 'complex', 'expert'],\n      maxContext: 100000,\n      canCreatePR: true,\n      canExecute: true,\n      async: true, // Jules is async - returns job ID\n      ...options.capabilities,\n    },\n    execute: async (task: AgentTask): Promise<AgentResult<JulesSessionResult>> => {\n      try {\n        const response = await fetch(`${baseUrl}/sessions`, {\n          method: 'POST',\n          headers: {\n            'X-Goog-Api-Key': config.apiKey,\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            prompt: formatJulesPrompt(task),\n            sourceContext: task.repo\n              ? {\n                  source: `sources/github/${task.repo}`,\n                  githubRepoContext: {\n                    startingBranch: 'main',\n                  },\n                }\n              : undefined,\n            automationMode,\n          }),\n        });\n\n        if (!response.ok) {\n          const error = await response.text();\n          return {\n            success: false,\n            error: `Jules API error: ${response.status} - ${error}`,\n            escalate: true,\n            cost: 0,\n          };\n        }\n\n        const result = await response.json();\n\n        return {\n          success: true,\n          data: {\n            sessionId: result.name?.split('/').pop() ?? result.name,\n            name: result.name,\n            state: result.state ?? 'PENDING',\n          },\n          jobId: result.name, // Caller should poll this\n          cost: 0,\n        };\n      } catch (error) {\n        return {\n          success: false,\n          error: error instanceof Error ? error.message : 'Unknown error',\n          escalate: true,\n          cost: 0,\n        };\n      }\n    },\n  };\n}\n\n/**\n * Poll a Jules session for completion\n */\nexport async function pollJulesSession(\n  config: JulesConfig,\n  sessionName: string\n): Promise<{ state: string; prUrl?: string; error?: string }> {\n  const baseUrl = config.baseUrl ?? DEFAULT_BASE_URL;\n\n  const response = await fetch(`${baseUrl}/${sessionName}`, {\n    headers: {\n      'X-Goog-Api-Key': config.apiKey,\n    },\n  });\n\n  if (!response.ok) {\n    throw new Error(`Failed to poll session: ${response.status}`);\n  }\n\n  const result = await response.json();\n\n  return {\n    state: result.state,\n    prUrl: result.pullRequestUrl,\n    error: result.error?.message,\n  };\n}\n\n/**\n * Send a follow-up message to a Jules session\n */\nexport async function sendJulesFollowUp(\n  config: JulesConfig,\n  sessionName: string,\n  message: string\n): Promise<void> {\n  const baseUrl = config.baseUrl ?? DEFAULT_BASE_URL;\n\n  const response = await fetch(`${baseUrl}/${sessionName}:addUserResponse`, {\n    method: 'POST',\n    headers: {\n      'X-Goog-Api-Key': config.apiKey,\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({ userResponse: message }),\n  });\n\n  if (!response.ok) {\n    throw new Error(`Failed to send follow-up: ${response.status}`);\n  }\n}\n\nfunction formatJulesPrompt(task: AgentTask): string {\n  return `${task.description}\n\nContext:\n${task.context}\n\nRequirements:\n- Create a PR with your changes\n- Ensure all tests pass\n- Follow existing code style\n- Add appropriate documentation`;\n}\n","/**\n * Ollama Provider Implementation\n *\n * Creates agents that use Ollama for LLM inference.\n * Ollama is free/self-hosted, ideal for trivial/simple tasks.\n */\n\nimport type {\n  AgentCapabilities,\n  AgentDefinition,\n  AgentResult,\n  AgentTask,\n  LLMEvaluator,\n} from '@agentic/triage';\n\nexport interface OllamaConfig {\n  /** Ollama API URL (default: http://localhost:11434) */\n  url?: string;\n  /** Model to use (default: qwen2.5-coder:32b) */\n  model?: string;\n  /** Request timeout in ms (default: 60000) */\n  timeout?: number;\n}\n\nconst DEFAULT_URL = 'http://localhost:11434';\nconst DEFAULT_MODEL = 'qwen2.5-coder:32b';\nconst DEFAULT_TIMEOUT = 60000;\n\n/**\n * Create an LLM evaluator function for Ollama\n * Use this with @agentic/triage's evaluateComplexity()\n */\nexport function createOllamaEvaluator(config: OllamaConfig = {}): LLMEvaluator {\n  const url = config.url ?? DEFAULT_URL;\n  const model = config.model ?? DEFAULT_MODEL;\n  const timeout = config.timeout ?? DEFAULT_TIMEOUT;\n\n  return async (prompt: string): Promise<string> => {\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), timeout);\n\n    try {\n      const response = await fetch(`${url}/api/generate`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          model,\n          prompt,\n          stream: false,\n          format: 'json',\n        }),\n        signal: controller.signal,\n      });\n\n      if (!response.ok) {\n        throw new Error(`Ollama API error: ${response.status}`);\n      }\n\n      const result = await response.json();\n      return result.response;\n    } finally {\n      clearTimeout(timeoutId);\n    }\n  };\n}\n\n/**\n * Create an Ollama-based agent for the registry\n */\nexport function createOllamaAgent(\n  id: string,\n  config: OllamaConfig = {},\n  options: {\n    name?: string;\n    cost?: number;\n    priority?: number;\n    capabilities?: Partial<AgentCapabilities>;\n  } = {}\n): AgentDefinition<string> {\n  const url = config.url ?? DEFAULT_URL;\n  const model = config.model ?? DEFAULT_MODEL;\n  const timeout = config.timeout ?? DEFAULT_TIMEOUT;\n\n  return {\n    id,\n    name: options.name ?? `Ollama (${model})`,\n    cost: options.cost ?? 0, // Free\n    priority: options.priority ?? 1, // High priority (try first)\n    enabled: true,\n    requiresApproval: false,\n    capabilities: {\n      tiers: ['trivial', 'simple'],\n      maxContext: 8000,\n      canCreatePR: false,\n      canExecute: false,\n      async: false,\n      ...options.capabilities,\n    },\n    execute: async (task: AgentTask): Promise<AgentResult<string>> => {\n      try {\n        const controller = new AbortController();\n        const timeoutId = setTimeout(() => controller.abort(), timeout);\n\n        const response = await fetch(`${url}/api/generate`, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({\n            model,\n            prompt: formatTaskPrompt(task),\n            stream: false,\n          }),\n          signal: controller.signal,\n        });\n\n        clearTimeout(timeoutId);\n\n        if (!response.ok) {\n          return {\n            success: false,\n            error: `Ollama error: ${response.status}`,\n            escalate: true,\n            cost: 0,\n          };\n        }\n\n        const result = await response.json();\n        const output = result.response?.trim();\n\n        // Check if Ollama is asking to escalate\n        if (output?.toUpperCase().startsWith('ESCALATE:')) {\n          return {\n            success: false,\n            error: output,\n            escalate: true,\n            cost: 0,\n          };\n        }\n\n        return {\n          success: true,\n          data: output,\n          cost: 0,\n        };\n      } catch (error) {\n        return {\n          success: false,\n          error: error instanceof Error ? error.message : 'Unknown error',\n          escalate: true,\n          cost: 0,\n        };\n      }\n    },\n  };\n}\n\nfunction formatTaskPrompt(task: AgentTask): string {\n  return `You are a code assistant. Complete this task:\n\nTASK: ${task.description}\n\nCONTEXT:\n${task.context.slice(0, 8000)}\n\nIf you can complete this task, provide the solution.\nIf this task is too complex, respond with: ESCALATE: <reason>\n\nProvide your response:`;\n}\n"]}