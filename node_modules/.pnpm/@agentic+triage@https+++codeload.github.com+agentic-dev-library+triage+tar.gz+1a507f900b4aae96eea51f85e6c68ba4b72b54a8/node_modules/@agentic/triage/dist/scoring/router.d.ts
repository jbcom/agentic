/**
 * Intelligent Task Router
 *
 * Routes tasks to optimal agents based on:
 * 1. Sigma-weighted complexity scores
 * 2. Agent capabilities and availability
 * 3. Cost optimization (prefer cheaper agents)
 * 4. Escalation on failure
 */
import type { AgentDefinition, AgentRegistry, AgentResult, AgentTask } from './agents.js';
import type { ComplexityScore } from './evaluator.js';
export interface RouterConfig {
    /** Agent registry with available agents */
    registry: AgentRegistry;
    /** Maximum retries per agent before escalating */
    maxRetries?: number;
    /** Daily cost budget (0 = unlimited) */
    dailyBudget?: number;
    /** Callback when an agent is selected */
    onAgentSelected?: (agent: AgentDefinition, task: AgentTask) => void;
    /** Callback when escalating */
    onEscalate?: (fromAgent: AgentDefinition, toAgent: AgentDefinition, reason: string) => void;
    /** Callback for cost tracking */
    onCostIncurred?: (agent: AgentDefinition, cost: number, task: AgentTask) => void;
}
export interface RoutingResult<T = unknown> {
    /** Whether the task was successfully completed */
    success: boolean;
    /** Which agent handled the task */
    agent: string;
    /** The result from the agent */
    result: AgentResult<T>;
    /** Total cost incurred */
    totalCost: number;
    /** Number of attempts made */
    attempts: number;
    /** Trail of agents tried */
    trail: Array<{
        agent: string;
        success: boolean;
        error?: string;
    }>;
}
export interface RouterState {
    /** Costs incurred today */
    dailyCosts: number;
    /** Last reset timestamp */
    lastReset: string;
    /** Tasks processed today */
    tasksProcessed: number;
}
/**
 * Task Router - intelligently routes tasks to agents
 */
export declare class TaskRouter {
    private config;
    private state;
    constructor(config: RouterConfig);
    /**
     * Route a task to the optimal agent
     */
    route(task: Omit<AgentTask, 'complexityScore' | 'complexityTier'>, complexity: ComplexityScore): Promise<RoutingResult>;
    /**
     * Check if a task has approval for an agent that requires it
     */
    private hasApproval;
    /**
     * Reset daily state if it's a new day
     */
    private maybeResetDaily;
    /**
     * Get current router state
     */
    getState(): RouterState;
    /**
     * Get remaining daily budget
     */
    getRemainingBudget(): number;
}
/**
 * Create a simple router with default configuration
 */
export declare function createRouter(registry: AgentRegistry, options?: Partial<RouterConfig>): TaskRouter;
//# sourceMappingURL=router.d.ts.map