{"version":3,"sources":["../src/mcp.ts","../src/providers.ts","../src/sandbox.ts","../src/mocking.ts"],"names":["vi","process"],"mappings":"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","file":"mocking.js","sourcesContent":["/**\n * MCP (Model Context Protocol) mocking utilities for agentic-control testing.\n *\n * This module provides utilities for mocking MCP servers, tools, and resources\n * during testing. It allows you to simulate MCP server behavior without\n * needing actual MCP server implementations.\n *\n * @module mcp\n */\n\nimport { type Mock, vi } from 'vitest';\n\n/**\n * List of MCP-related modules that can be mocked.\n */\nexport const MCP_MODULES = [\n  '@modelcontextprotocol/sdk',\n  '@modelcontextprotocol/sdk/client',\n  '@modelcontextprotocol/sdk/server',\n  '@ai-sdk/mcp',\n] as const;\n\n/**\n * Definition for a mock MCP tool.\n */\nexport interface MockToolDefinition {\n  /** Tool name */\n  name: string;\n  /** Tool description */\n  description?: string;\n  /** Input schema (JSON Schema) */\n  inputSchema?: Record<string, unknown>;\n  /** Handler function for the tool */\n  handler: (args: unknown) => unknown | Promise<unknown>;\n}\n\n/**\n * Definition for a mock MCP resource.\n */\nexport interface MockResourceDefinition {\n  /** Resource URI */\n  uri: string;\n  /** Resource name */\n  name?: string;\n  /** Resource description */\n  description?: string;\n  /** MIME type */\n  mimeType?: string;\n  /** Resource content */\n  content: string | Buffer;\n}\n\n/**\n * Options for creating an McpMocker instance.\n */\nexport interface McpMockerOptions {\n  /** Whether to auto-mock all MCP modules */\n  autoMock?: boolean;\n}\n\n/**\n * Mock MCP tool with call tracking.\n */\nexport interface MockMcpTool {\n  /** Tool definition */\n  definition: MockToolDefinition;\n  /** Mock handler with call tracking */\n  handler: Mock<(args: unknown) => unknown | Promise<unknown>>;\n  /** Call history */\n  calls: unknown[];\n}\n\n/**\n * Mock MCP resource.\n */\nexport interface MockMcpResource {\n  /** Resource definition */\n  definition: MockResourceDefinition;\n  /** Read count */\n  readCount: number;\n}\n\n/**\n * Mock MCP server configuration.\n */\nexport interface MockMcpServerConfig {\n  /** Server name */\n  name: string;\n  /** Server tools */\n  tools?: MockToolDefinition[];\n  /** Server resources */\n  resources?: MockResourceDefinition[];\n  /** Server capabilities */\n  capabilities?: {\n    tools?: boolean;\n    resources?: boolean;\n    prompts?: boolean;\n  };\n}\n\n/**\n * Mock MCP server instance.\n */\nexport class MockMcpServer {\n  public readonly name: string;\n  public readonly tools: Map<string, MockMcpTool> = new Map();\n  public readonly resources: Map<string, MockMcpResource> = new Map();\n  public readonly capabilities: {\n    tools: boolean;\n    resources: boolean;\n    prompts: boolean;\n  };\n\n  private connected = false;\n\n  constructor(config: MockMcpServerConfig) {\n    this.name = config.name;\n    this.capabilities = {\n      tools: config.capabilities?.tools ?? true,\n      resources: config.capabilities?.resources ?? true,\n      prompts: config.capabilities?.prompts ?? false,\n    };\n\n    // Register tools\n    for (const tool of config.tools ?? []) {\n      this.registerTool(tool);\n    }\n\n    // Register resources\n    for (const resource of config.resources ?? []) {\n      this.registerResource(resource);\n    }\n  }\n\n  /**\n   * Register a tool with this mock server.\n   */\n  registerTool(definition: MockToolDefinition): MockMcpTool {\n    const mockTool: MockMcpTool = {\n      definition,\n      handler: vi.fn(definition.handler),\n      calls: [],\n    };\n    this.tools.set(definition.name, mockTool);\n    return mockTool;\n  }\n\n  /**\n   * Register a resource with this mock server.\n   */\n  registerResource(definition: MockResourceDefinition): MockMcpResource {\n    const mockResource: MockMcpResource = {\n      definition,\n      readCount: 0,\n    };\n    this.resources.set(definition.uri, mockResource);\n    return mockResource;\n  }\n\n  /**\n   * Connect to this mock server.\n   */\n  async connect(): Promise<void> {\n    this.connected = true;\n  }\n\n  /**\n   * Disconnect from this mock server.\n   */\n  async disconnect(): Promise<void> {\n    this.connected = false;\n  }\n\n  /**\n   * Check if connected.\n   */\n  isConnected(): boolean {\n    return this.connected;\n  }\n\n  /**\n   * List available tools.\n   */\n  async listTools(): Promise<\n    Array<{\n      name: string;\n      description?: string;\n      inputSchema?: Record<string, unknown>;\n    }>\n  > {\n    return Array.from(this.tools.values()).map((tool) => ({\n      name: tool.definition.name,\n      description: tool.definition.description,\n      inputSchema: tool.definition.inputSchema,\n    }));\n  }\n\n  /**\n   * Call a tool.\n   */\n  async callTool(name: string, args: unknown): Promise<unknown> {\n    const tool = this.tools.get(name);\n    if (!tool) {\n      throw new Error(`Tool not found: ${name}`);\n    }\n    tool.calls.push(args);\n    return tool.handler(args);\n  }\n\n  /**\n   * List available resources.\n   */\n  async listResources(): Promise<\n    Array<{\n      uri: string;\n      name?: string;\n      description?: string;\n      mimeType?: string;\n    }>\n  > {\n    return Array.from(this.resources.values()).map((resource) => ({\n      uri: resource.definition.uri,\n      name: resource.definition.name,\n      description: resource.definition.description,\n      mimeType: resource.definition.mimeType,\n    }));\n  }\n\n  /**\n   * Read a resource.\n   */\n  async readResource(uri: string): Promise<{\n    uri: string;\n    mimeType?: string;\n    content: string | Buffer;\n  }> {\n    const resource = this.resources.get(uri);\n    if (!resource) {\n      throw new Error(`Resource not found: ${uri}`);\n    }\n    resource.readCount++;\n    return {\n      uri: resource.definition.uri,\n      mimeType: resource.definition.mimeType,\n      content: resource.definition.content,\n    };\n  }\n\n  /**\n   * Reset all call history.\n   */\n  reset(): void {\n    for (const tool of this.tools.values()) {\n      tool.handler.mockClear();\n      tool.calls = [];\n    }\n    for (const resource of this.resources.values()) {\n      resource.readCount = 0;\n    }\n  }\n}\n\n/**\n * MCP mocking utilities class.\n *\n * Provides methods for mocking MCP servers, tools, and resources\n * during testing.\n *\n * @example\n * ```typescript\n * import { McpMocker } from 'vitest-agentic-control';\n *\n * const mocker = new McpMocker();\n *\n * // Create a mock MCP server\n * const server = mocker.mockServer('test-server', {\n *   tools: [\n *     {\n *       name: 'get_weather',\n *       description: 'Get weather for a location',\n *       handler: (args) => ({ temp: 72, condition: 'sunny' }),\n *     },\n *   ],\n *   resources: [\n *     {\n *       uri: 'file:///config.json',\n *       content: '{\"key\": \"value\"}',\n *     },\n *   ],\n * });\n *\n * // Use the mock server in tests\n * await server.connect();\n * const result = await server.callTool('get_weather', { location: 'NYC' });\n * ```\n */\nexport class McpMocker {\n  /** Map of mock servers by name */\n  public readonly servers: Map<string, MockMcpServer> = new Map();\n\n  /** Track mocked modules */\n  private readonly mockedModules: Set<string> = new Set();\n\n  constructor(options: McpMockerOptions = {}) {\n    if (options.autoMock) {\n      this.mockAllModules();\n    }\n  }\n\n  /**\n   * Create a mock MCP server.\n   *\n   * @param name - Server name\n   * @param config - Server configuration\n   * @returns The mock server\n   */\n  mockServer(name: string, config: Omit<MockMcpServerConfig, 'name'> = {}): MockMcpServer {\n    const server = new MockMcpServer({ name, ...config });\n    this.servers.set(name, server);\n    return server;\n  }\n\n  /**\n   * Get a mock server by name.\n   *\n   * @param name - Server name\n   * @returns The mock server or undefined\n   */\n  getServer(name: string): MockMcpServer | undefined {\n    return this.servers.get(name);\n  }\n\n  /**\n   * Mock the MCP client module.\n   *\n   * @returns Mock client factory\n   */\n  mockClient(): Mock {\n    const mockClientFactory = vi.fn((serverName: string) => {\n      const server = this.servers.get(serverName);\n      if (!server) {\n        throw new Error(`No mock server registered: ${serverName}`);\n      }\n      return server;\n    });\n\n    vi.doMock('@modelcontextprotocol/sdk/client', () => ({\n      Client: mockClientFactory,\n    }));\n\n    this.mockedModules.add('@modelcontextprotocol/sdk/client');\n    return mockClientFactory;\n  }\n\n  /**\n   * Mock all MCP-related modules.\n   *\n   * @returns Dictionary of mocked modules\n   */\n  mockAllModules(): Record<string, unknown> {\n    const mocks: Record<string, unknown> = {};\n\n    // Mock SDK client\n    mocks['@modelcontextprotocol/sdk/client'] = {\n      Client: vi.fn().mockImplementation((serverName: string) => {\n        return this.servers.get(serverName) ?? new MockMcpServer({ name: serverName });\n      }),\n    };\n\n    // Mock SDK server\n    mocks['@modelcontextprotocol/sdk/server'] = {\n      Server: vi.fn().mockImplementation((config: MockMcpServerConfig) => {\n        return new MockMcpServer(config);\n      }),\n    };\n\n    // Mock AI SDK MCP integration\n    mocks['@ai-sdk/mcp'] = {\n      experimental_createMCPClient: vi.fn().mockImplementation(async (config: { name: string }) => {\n        return this.servers.get(config.name) ?? new MockMcpServer({ name: config.name });\n      }),\n    };\n\n    for (const [modulePath, mock] of Object.entries(mocks)) {\n      vi.doMock(modulePath, () => mock as Record<string, unknown>);\n      this.mockedModules.add(modulePath);\n    }\n\n    return mocks;\n  }\n\n  /**\n   * Create a mock tool that can be registered with servers.\n   *\n   * @param name - Tool name\n   * @param handler - Tool handler\n   * @param options - Additional options\n   * @returns Tool definition\n   */\n  createMockTool(\n    name: string,\n    handler: (args: unknown) => unknown | Promise<unknown>,\n    options: {\n      description?: string;\n      inputSchema?: Record<string, unknown>;\n    } = {}\n  ): MockToolDefinition {\n    return {\n      name,\n      description: options.description,\n      inputSchema: options.inputSchema,\n      handler,\n    };\n  }\n\n  /**\n   * Create a mock resource that can be registered with servers.\n   *\n   * @param uri - Resource URI\n   * @param content - Resource content\n   * @param options - Additional options\n   * @returns Resource definition\n   */\n  createMockResource(\n    uri: string,\n    content: string | Buffer,\n    options: {\n      name?: string;\n      description?: string;\n      mimeType?: string;\n    } = {}\n  ): MockResourceDefinition {\n    return {\n      uri,\n      content,\n      name: options.name,\n      description: options.description,\n      mimeType: options.mimeType,\n    };\n  }\n\n  /**\n   * Restore all mocked modules.\n   */\n  restoreAll(): void {\n    this.mockedModules.clear();\n    this.servers.clear();\n  }\n\n  /**\n   * Reset all mock servers.\n   */\n  resetAll(): void {\n    for (const server of this.servers.values()) {\n      server.reset();\n    }\n  }\n}\n\n/**\n * Factory function to create an McpMocker instance.\n *\n * @param options - Configuration options\n * @returns A new McpMocker instance\n */\nexport function createMcpMocker(options: McpMockerOptions = {}): McpMocker {\n  return new McpMocker(options);\n}\n","/**\n * AI Provider mocking utilities for agentic-control testing.\n *\n * This module provides utilities for mocking AI providers (Anthropic, OpenAI,\n * Google, Mistral, Azure, Ollama) during testing. It allows you to simulate\n * AI model responses without making actual API calls.\n *\n * @module providers\n */\n\nimport { type Mock, vi } from 'vitest';\n\n/**\n * List of supported AI providers.\n */\nexport const SUPPORTED_PROVIDERS = [\n  'anthropic',\n  'openai',\n  'google',\n  'mistral',\n  'azure',\n  'ollama',\n] as const;\n\nexport type SupportedProvider = (typeof SUPPORTED_PROVIDERS)[number];\n\n/**\n * Provider module paths for mocking.\n */\nexport const PROVIDER_MODULES: Record<SupportedProvider, string> = {\n  anthropic: '@ai-sdk/anthropic',\n  openai: '@ai-sdk/openai',\n  google: '@ai-sdk/google',\n  mistral: '@ai-sdk/mistral',\n  azure: '@ai-sdk/azure',\n  ollama: 'ai-sdk-ollama',\n};\n\n/**\n * Common AI SDK modules.\n */\nexport const AI_SDK_MODULES = ['ai', 'ai/rsc'] as const;\n\n/**\n * Mock provider response configuration.\n */\nexport interface MockProviderResponse {\n  /** The text response to return */\n  response?: string;\n  /** Tool calls to include in response */\n  toolCalls?: Array<{\n    name: string;\n    args: Record<string, unknown>;\n  }>;\n  /** Whether the response should stream */\n  stream?: boolean;\n  /** Simulated latency in ms */\n  latency?: number;\n  /** Error to throw instead of returning response */\n  error?: Error;\n  /** Usage information */\n  usage?: {\n    promptTokens: number;\n    completionTokens: number;\n    totalTokens: number;\n  };\n}\n\n/**\n * Mock stream chunk for streaming responses.\n */\nexport interface MockStreamChunk {\n  /** Text delta */\n  textDelta?: string;\n  /** Tool call start */\n  toolCallStart?: {\n    name: string;\n    id: string;\n  };\n  /** Tool call delta (args) */\n  toolCallDelta?: {\n    id: string;\n    args: string;\n  };\n  /** Whether this is the final chunk */\n  isFinished?: boolean;\n}\n\n/**\n * Options for creating a ProviderMocker instance.\n */\nexport interface ProviderMockerOptions {\n  /** Default response for all providers */\n  defaultResponse?: MockProviderResponse;\n  /** Whether to auto-mock all provider modules */\n  autoMock?: boolean;\n}\n\n/**\n * Mock model instance for a provider.\n */\ninterface MockModel {\n  /** Generate a response */\n  generate: Mock<(prompt: string, options?: unknown) => Promise<unknown>>;\n  /** Generate a streaming response */\n  generateStream: Mock<(prompt: string, options?: unknown) => AsyncGenerator<MockStreamChunk>>;\n  /** The provider this model belongs to */\n  provider: SupportedProvider;\n  /** Model ID */\n  modelId: string;\n}\n\n/**\n * AI Provider mocking utilities class.\n *\n * Provides methods for mocking AI provider responses during testing.\n *\n * @example\n * ```typescript\n * import { ProviderMocker } from 'vitest-agentic-control';\n *\n * const mocker = new ProviderMocker();\n *\n * // Mock Anthropic provider\n * mocker.mockAnthropic({\n *   response: 'Hello! I am Claude.',\n *   usage: { promptTokens: 10, completionTokens: 20, totalTokens: 30 },\n * });\n *\n * // Mock OpenAI provider with streaming\n * mocker.mockOpenAI({\n *   response: 'Hello! I am GPT.',\n *   stream: true,\n * });\n *\n * // Mock a specific model\n * const model = mocker.createMockModel('anthropic', 'claude-sonnet-4-20250514');\n * ```\n */\nexport class ProviderMocker {\n  /** Default response configuration */\n  private defaultResponse: MockProviderResponse;\n\n  /** Track mocked modules */\n  private readonly mockedModules: Set<string> = new Set();\n\n  /** Track provider-specific configurations */\n  private readonly providerConfigs: Map<SupportedProvider, MockProviderResponse> = new Map();\n\n  /** Track mock models */\n  public readonly models: Map<string, MockModel> = new Map();\n\n  constructor(options: ProviderMockerOptions = {}) {\n    this.defaultResponse = options.defaultResponse ?? {\n      response: 'This is a mock AI response.',\n    };\n\n    if (options.autoMock) {\n      this.mockAllModules();\n    }\n  }\n\n  /**\n   * Mock the Anthropic provider.\n   *\n   * @param config - Response configuration\n   */\n  mockAnthropic(config: MockProviderResponse = {}): void {\n    this.providerConfigs.set('anthropic', { ...this.defaultResponse, ...config });\n    this.mockProviderModule('anthropic');\n  }\n\n  /**\n   * Mock the OpenAI provider.\n   *\n   * @param config - Response configuration\n   */\n  mockOpenAI(config: MockProviderResponse = {}): void {\n    this.providerConfigs.set('openai', { ...this.defaultResponse, ...config });\n    this.mockProviderModule('openai');\n  }\n\n  /**\n   * Mock the Google provider.\n   *\n   * @param config - Response configuration\n   */\n  mockGoogle(config: MockProviderResponse = {}): void {\n    this.providerConfigs.set('google', { ...this.defaultResponse, ...config });\n    this.mockProviderModule('google');\n  }\n\n  /**\n   * Mock the Mistral provider.\n   *\n   * @param config - Response configuration\n   */\n  mockMistral(config: MockProviderResponse = {}): void {\n    this.providerConfigs.set('mistral', { ...this.defaultResponse, ...config });\n    this.mockProviderModule('mistral');\n  }\n\n  /**\n   * Mock the Azure provider.\n   *\n   * @param config - Response configuration\n   */\n  mockAzure(config: MockProviderResponse = {}): void {\n    this.providerConfigs.set('azure', { ...this.defaultResponse, ...config });\n    this.mockProviderModule('azure');\n  }\n\n  /**\n   * Mock the Ollama provider.\n   *\n   * @param config - Response configuration\n   */\n  mockOllama(config: MockProviderResponse = {}): void {\n    this.providerConfigs.set('ollama', { ...this.defaultResponse, ...config });\n    this.mockProviderModule('ollama');\n  }\n\n  /**\n   * Mock a specific provider module.\n   *\n   * @param provider - The provider to mock\n   */\n  private mockProviderModule(provider: SupportedProvider): void {\n    const modulePath = PROVIDER_MODULES[provider];\n    const config = this.providerConfigs.get(provider) ?? this.defaultResponse;\n\n    const mockProvider = this.createMockProviderFactory(provider, config);\n\n    vi.doMock(modulePath, () => mockProvider);\n    this.mockedModules.add(modulePath);\n  }\n\n  /**\n   * Create a mock provider factory function.\n   *\n   * @param provider - The provider type\n   * @param config - Response configuration\n   * @returns Mock provider factory\n   */\n  private createMockProviderFactory(\n    provider: SupportedProvider,\n    config: MockProviderResponse\n  ): Record<string, unknown> {\n    const createModel = (modelId: string) => {\n      const model = this.createMockModel(provider, modelId, config);\n      return model;\n    };\n\n    // Return appropriate factory based on provider\n    switch (provider) {\n      case 'anthropic':\n        return {\n          anthropic: vi.fn().mockReturnValue({\n            chat: createModel,\n            messages: createModel,\n          }),\n          createAnthropic: vi.fn().mockReturnValue({\n            chat: createModel,\n            messages: createModel,\n          }),\n        };\n\n      case 'openai':\n        return {\n          openai: vi.fn().mockReturnValue({\n            chat: createModel,\n            completion: createModel,\n          }),\n          createOpenAI: vi.fn().mockReturnValue({\n            chat: createModel,\n            completion: createModel,\n          }),\n        };\n\n      case 'google':\n        return {\n          google: vi.fn().mockReturnValue({\n            generativeAI: createModel,\n          }),\n          createGoogle: vi.fn().mockReturnValue({\n            generativeAI: createModel,\n          }),\n        };\n\n      case 'mistral':\n        return {\n          mistral: vi.fn().mockReturnValue({\n            chat: createModel,\n          }),\n          createMistral: vi.fn().mockReturnValue({\n            chat: createModel,\n          }),\n        };\n\n      case 'azure':\n        return {\n          azure: vi.fn().mockReturnValue({\n            chat: createModel,\n          }),\n          createAzure: vi.fn().mockReturnValue({\n            chat: createModel,\n          }),\n        };\n\n      case 'ollama':\n        return {\n          ollama: vi.fn().mockReturnValue({\n            chat: createModel,\n          }),\n          createOllama: vi.fn().mockReturnValue({\n            chat: createModel,\n          }),\n        };\n    }\n  }\n\n  /**\n   * Create a mock model for a provider.\n   *\n   * @param provider - The provider type\n   * @param modelId - The model ID\n   * @param config - Response configuration\n   * @returns Mock model instance\n   */\n  createMockModel(\n    provider: SupportedProvider,\n    modelId: string,\n    config: MockProviderResponse = {}\n  ): MockModel {\n    const mergedConfig = { ...this.defaultResponse, ...config };\n\n    const generate = vi.fn(async () => {\n      if (mergedConfig.latency) {\n        await new Promise((resolve) => setTimeout(resolve, mergedConfig.latency));\n      }\n\n      if (mergedConfig.error) {\n        throw mergedConfig.error;\n      }\n\n      return {\n        text: mergedConfig.response ?? 'Mock response',\n        toolCalls: mergedConfig.toolCalls ?? [],\n        usage: mergedConfig.usage ?? {\n          promptTokens: 10,\n          completionTokens: 20,\n          totalTokens: 30,\n        },\n      };\n    });\n\n    const generateStream = vi.fn(async function* () {\n      if (mergedConfig.latency) {\n        await new Promise((resolve) => setTimeout(resolve, mergedConfig.latency));\n      }\n\n      if (mergedConfig.error) {\n        throw mergedConfig.error;\n      }\n\n      const text = mergedConfig.response ?? 'Mock response';\n      const chunks = text.split(' ');\n\n      for (const chunk of chunks) {\n        yield { textDelta: `${chunk} ` };\n      }\n\n      yield { isFinished: true };\n    });\n\n    const model: MockModel = {\n      generate: generate as Mock<(prompt: string, options?: unknown) => Promise<unknown>>,\n      generateStream: generateStream as Mock<\n        (prompt: string, options?: unknown) => AsyncGenerator<MockStreamChunk>\n      >,\n      provider,\n      modelId,\n    };\n\n    this.models.set(`${provider}:${modelId}`, model);\n    return model;\n  }\n\n  /**\n   * Mock the core AI SDK module.\n   */\n  mockAiSdk(): void {\n    vi.doMock('ai', () => ({\n      generateText: vi.fn(async (options: { model: MockModel; prompt: string }) => {\n        return options.model.generate(options.prompt, options);\n      }),\n      streamText: vi.fn(async function* (options: { model: MockModel; prompt: string }) {\n        yield* options.model.generateStream(options.prompt, options);\n      }),\n      generateObject: vi.fn(async () => ({ object: {} })),\n      streamObject: vi.fn(async function* () {\n        yield { object: {} };\n      }),\n    }));\n\n    this.mockedModules.add('ai');\n  }\n\n  /**\n   * Mock all provider modules.\n   *\n   * @returns Dictionary of mocked modules\n   */\n  mockAllModules(): Record<string, unknown> {\n    const mocks: Record<string, unknown> = {};\n\n    // Mock AI SDK\n    this.mockAiSdk();\n    mocks.ai = true;\n\n    // Mock all providers\n    for (const provider of SUPPORTED_PROVIDERS) {\n      this.mockProviderModule(provider);\n      mocks[PROVIDER_MODULES[provider]] = true;\n    }\n\n    return mocks;\n  }\n\n  /**\n   * Set a response for a specific provider.\n   *\n   * @param provider - The provider\n   * @param config - Response configuration\n   */\n  setProviderResponse(provider: SupportedProvider, config: MockProviderResponse): void {\n    this.providerConfigs.set(provider, { ...this.defaultResponse, ...config });\n  }\n\n  /**\n   * Get the configuration for a provider.\n   *\n   * @param provider - The provider\n   * @returns The configuration or undefined\n   */\n  getProviderConfig(provider: SupportedProvider): MockProviderResponse | undefined {\n    return this.providerConfigs.get(provider);\n  }\n\n  /**\n   * Restore all mocked modules.\n   */\n  restoreAll(): void {\n    this.mockedModules.clear();\n    this.providerConfigs.clear();\n    this.models.clear();\n  }\n\n  /**\n   * Reset all mocks.\n   */\n  resetAll(): void {\n    for (const model of this.models.values()) {\n      model.generate.mockClear();\n      model.generateStream.mockClear();\n    }\n  }\n}\n\n/**\n * Factory function to create a ProviderMocker instance.\n *\n * @param options - Configuration options\n * @returns A new ProviderMocker instance\n */\nexport function createProviderMocker(options: ProviderMockerOptions = {}): ProviderMocker {\n  return new ProviderMocker(options);\n}\n","/**\n * Sandbox execution mocking utilities for agentic-control testing.\n *\n * This module provides utilities for mocking Docker container execution\n * and sandbox operations during testing. It allows you to simulate\n * container behavior without needing actual Docker.\n *\n * @module sandbox\n */\n\nimport { type Mock, vi } from 'vitest';\n\n/**\n * Mock container configuration.\n */\nexport interface MockContainerConfig {\n  /** Container ID */\n  id?: string;\n  /** Container name */\n  name?: string;\n  /** Image name */\n  image?: string;\n  /** Working directory */\n  workdir?: string;\n  /** Environment variables */\n  env?: Record<string, string>;\n  /** Memory limit in MB */\n  memory?: number;\n  /** Timeout in ms */\n  timeout?: number;\n}\n\n/**\n * Mock execution result.\n */\nexport interface MockExecutionResult {\n  /** Whether execution succeeded */\n  success: boolean;\n  /** Exit code */\n  exitCode?: number;\n  /** Standard output */\n  stdout?: string;\n  /** Standard error */\n  stderr?: string;\n  /** Output files */\n  files?: Array<{\n    path: string;\n    content: string | Buffer;\n  }>;\n  /** Execution duration in ms */\n  duration?: number;\n  /** Error if execution failed */\n  error?: Error;\n}\n\n/**\n * Options for creating a SandboxMocker instance.\n */\nexport interface SandboxMockerOptions {\n  /** Default container configuration */\n  defaultConfig?: MockContainerConfig;\n  /** Default execution result */\n  defaultResult?: MockExecutionResult;\n  /** Whether to auto-mock Docker commands */\n  autoMock?: boolean;\n}\n\n/**\n * Mock container instance.\n */\nexport interface MockContainer {\n  /** Container configuration */\n  config: MockContainerConfig;\n  /** Container status */\n  status: 'created' | 'running' | 'stopped' | 'removed';\n  /** Execution history */\n  executions: Array<{\n    command: string[];\n    result: MockExecutionResult;\n    timestamp: Date;\n  }>;\n  /** Mock methods */\n  start: Mock<() => Promise<void>>;\n  stop: Mock<() => Promise<void>>;\n  exec: Mock<(command: string[]) => Promise<MockExecutionResult>>;\n  remove: Mock<() => Promise<void>>;\n  copyTo: Mock<(hostPath: string, containerPath: string) => Promise<void>>;\n  copyFrom: Mock<(containerPath: string, hostPath: string) => Promise<void>>;\n}\n\n/**\n * Sandbox execution mocking utilities class.\n *\n * Provides methods for mocking Docker container execution during testing.\n *\n * @example\n * ```typescript\n * import { SandboxMocker } from 'vitest-agentic-control';\n *\n * const mocker = new SandboxMocker();\n *\n * // Mock successful execution\n * mocker.mockExecution({\n *   success: true,\n *   stdout: 'Hello from container!',\n *   exitCode: 0,\n * });\n *\n * // Create a mock container\n * const container = mocker.createMockContainer({\n *   image: 'node:22',\n *   workdir: '/app',\n * });\n *\n * // Execute command in mock container\n * const result = await container.exec(['npm', 'test']);\n * expect(result.success).toBe(true);\n * ```\n */\nexport class SandboxMocker {\n  /** Default container configuration */\n  private defaultConfig: MockContainerConfig;\n\n  /** Default execution result */\n  private defaultResult: MockExecutionResult;\n\n  /** Track mock containers */\n  public readonly containers: Map<string, MockContainer> = new Map();\n\n  /** Track mocked modules */\n  private readonly mockedModules: Set<string> = new Set();\n\n  /** Queue of results to return from executions */\n  private resultQueue: MockExecutionResult[] = [];\n\n  /** Counter for generating container IDs */\n  private containerIdCounter = 0;\n\n  constructor(options: SandboxMockerOptions = {}) {\n    this.defaultConfig = options.defaultConfig ?? {\n      image: 'node:22-slim',\n      workdir: '/workspace',\n    };\n\n    this.defaultResult = options.defaultResult ?? {\n      success: true,\n      exitCode: 0,\n      stdout: '',\n      stderr: '',\n    };\n\n    if (options.autoMock) {\n      this.mockDockerCommands();\n    }\n  }\n\n  /**\n   * Set the default execution result.\n   *\n   * @param result - The result to return from executions\n   */\n  mockExecution(result: MockExecutionResult): void {\n    this.defaultResult = result;\n  }\n\n  /**\n   * Queue a result to be returned from the next execution.\n   *\n   * @param result - The result to queue\n   */\n  queueResult(result: MockExecutionResult): void {\n    this.resultQueue.push(result);\n  }\n\n  /**\n   * Queue multiple results to be returned from executions.\n   *\n   * @param results - The results to queue\n   */\n  queueResults(results: MockExecutionResult[]): void {\n    this.resultQueue.push(...results);\n  }\n\n  /**\n   * Get the next result from the queue or the default.\n   */\n  private getNextResult(): MockExecutionResult {\n    return this.resultQueue.shift() ?? this.defaultResult;\n  }\n\n  /**\n   * Create a mock container.\n   *\n   * @param config - Container configuration\n   * @returns Mock container instance\n   */\n  createMockContainer(config: MockContainerConfig = {}): MockContainer {\n    const mergedConfig: MockContainerConfig = {\n      ...this.defaultConfig,\n      ...config,\n      id: config.id ?? `mock-container-${++this.containerIdCounter}`,\n      name: config.name ?? `mock-container-${this.containerIdCounter}`,\n    };\n\n    const containerId = mergedConfig.id || 'unknown';\n    const container: MockContainer = {\n      config: mergedConfig,\n      status: 'created',\n      executions: [],\n\n      start: vi.fn(async () => {\n        container.status = 'running';\n      }),\n\n      stop: vi.fn(async () => {\n        container.status = 'stopped';\n      }),\n\n      exec: vi.fn(async (command: string[]) => {\n        const result = this.getNextResult();\n        container.executions.push({\n          command,\n          result,\n          timestamp: new Date(),\n        });\n\n        if (result.error) {\n          throw result.error;\n        }\n\n        return result;\n      }),\n\n      remove: vi.fn(async () => {\n        container.status = 'removed';\n        this.containers.delete(containerId);\n      }),\n\n      copyTo: vi.fn(async () => {\n        // Mock file copy to container\n      }),\n\n      copyFrom: vi.fn(async () => {\n        // Mock file copy from container\n      }),\n    };\n\n    this.containers.set(containerId, container);\n    return container;\n  }\n\n  /**\n   * Mock Docker CLI commands.\n   */\n  mockDockerCommands(): void {\n    // Mock child_process for Docker commands\n    vi.doMock('child_process', () => ({\n      spawn: vi.fn((command: string, args: string[]) => {\n        const isDocker = command === 'docker' || command.includes('docker');\n\n        if (isDocker) {\n          return this.createMockDockerProcess(args);\n        }\n\n        // Return a basic mock process for non-Docker commands\n        return {\n          stdout: { on: vi.fn() },\n          stderr: { on: vi.fn() },\n          on: vi.fn((event: string, cb: (code: number) => void) => {\n            if (event === 'close') {\n              cb(0);\n            }\n          }),\n          kill: vi.fn(),\n        };\n      }),\n\n      spawnSync: vi.fn((command: string, _args: string[]) => {\n        const isDocker = command === 'docker' || command.includes('docker');\n\n        if (isDocker) {\n          const result = this.getNextResult();\n          return {\n            status: result.exitCode ?? 0,\n            stdout: Buffer.from(result.stdout ?? ''),\n            stderr: Buffer.from(result.stderr ?? ''),\n            error: result.error,\n          };\n        }\n\n        return {\n          status: 0,\n          stdout: Buffer.from(''),\n          stderr: Buffer.from(''),\n        };\n      }),\n\n      execSync: vi.fn((command: string) => {\n        if (command.includes('docker')) {\n          return this.defaultResult.stdout ?? '';\n        }\n        return '';\n      }),\n    }));\n\n    this.mockedModules.add('child_process');\n  }\n\n  /**\n   * Create a mock Docker process.\n   */\n  private createMockDockerProcess(args: string[]): unknown {\n    const result = this.getNextResult();\n\n    // Parse Docker command\n    const subcommand = args[0];\n\n    const process = {\n      stdout: {\n        on: vi.fn((event: string, cb: (data: Buffer) => void) => {\n          if (event === 'data' && result.stdout) {\n            cb(Buffer.from(result.stdout));\n          }\n        }),\n      },\n      stderr: {\n        on: vi.fn((event: string, cb: (data: Buffer) => void) => {\n          if (event === 'data' && result.stderr) {\n            cb(Buffer.from(result.stderr));\n          }\n        }),\n      },\n      on: vi.fn((event: string, cb: (code: number) => void) => {\n        if (event === 'close') {\n          setTimeout(() => cb(result.exitCode ?? 0), 10);\n        }\n      }),\n      kill: vi.fn(),\n    };\n\n    // Handle specific Docker commands\n    if (subcommand === 'run') {\n      // Create a mock container when docker run is called\n      const container = this.createMockContainer({\n        image: args.find((_a, i) => args[i - 1] === '--image') ?? 'unknown',\n      });\n      container.status = 'running';\n    }\n\n    return process;\n  }\n\n  /**\n   * Mock the ContainerManager class from agentic-control.\n   */\n  mockContainerManager(): Mock {\n    const mockManager = vi.fn().mockImplementation(() => ({\n      createContainer: vi.fn(async (config: MockContainerConfig) => {\n        return this.createMockContainer(config);\n      }),\n      startContainer: vi.fn(async (id: string) => {\n        const container = this.containers.get(id);\n        if (container) {\n          await container.start();\n        }\n      }),\n      stopContainer: vi.fn(async (id: string) => {\n        const container = this.containers.get(id);\n        if (container) {\n          await container.stop();\n        }\n      }),\n      removeContainer: vi.fn(async (id: string) => {\n        const container = this.containers.get(id);\n        if (container) {\n          await container.remove();\n        }\n      }),\n      execInContainer: vi.fn(async (id: string, command: string[]) => {\n        const container = this.containers.get(id);\n        if (container) {\n          return container.exec(command);\n        }\n        throw new Error(`Container not found: ${id}`);\n      }),\n    }));\n\n    vi.doMock('agentic-control/sandbox', () => ({\n      ContainerManager: mockManager,\n    }));\n\n    this.mockedModules.add('agentic-control/sandbox');\n    return mockManager;\n  }\n\n  /**\n   * Mock the SandboxExecutor class from agentic-control.\n   */\n  mockSandboxExecutor(): Mock {\n    const mockExecutor = vi.fn().mockImplementation(() => ({\n      execute: vi.fn(async () => {\n        return this.getNextResult();\n      }),\n      executeWithTimeout: vi.fn(async () => {\n        return this.getNextResult();\n      }),\n    }));\n\n    vi.doMock('agentic-control/sandbox', () => ({\n      SandboxExecutor: mockExecutor,\n    }));\n\n    this.mockedModules.add('agentic-control/sandbox');\n    return mockExecutor;\n  }\n\n  /**\n   * Create a mock runtime adapter.\n   *\n   * @param name - Runtime name\n   * @param command - Command to return from prepareCommand\n   */\n  createMockRuntime(\n    name: string,\n    command: string[] = ['echo', 'mock']\n  ): {\n    name: string;\n    prepareCommand: Mock<(prompt: string, options?: unknown) => string[]>;\n    parseOutput: Mock<(output: string) => unknown>;\n  } {\n    return {\n      name,\n      prepareCommand: vi.fn(() => command),\n      parseOutput: vi.fn((output: string) => ({ output })),\n    };\n  }\n\n  /**\n   * Get all container IDs.\n   */\n  getContainerIds(): string[] {\n    return Array.from(this.containers.keys());\n  }\n\n  /**\n   * Get a container by ID.\n   */\n  getContainer(id: string): MockContainer | undefined {\n    return this.containers.get(id);\n  }\n\n  /**\n   * Restore all mocked modules.\n   */\n  restoreAll(): void {\n    this.mockedModules.clear();\n    this.containers.clear();\n    this.resultQueue = [];\n  }\n\n  /**\n   * Reset all mocks.\n   */\n  resetAll(): void {\n    for (const container of this.containers.values()) {\n      container.start.mockClear();\n      container.stop.mockClear();\n      container.exec.mockClear();\n      container.remove.mockClear();\n      container.copyTo.mockClear();\n      container.copyFrom.mockClear();\n      container.executions = [];\n    }\n    this.resultQueue = [];\n  }\n}\n\n/**\n * Factory function to create a SandboxMocker instance.\n *\n * @param options - Configuration options\n * @returns A new SandboxMocker instance\n */\nexport function createSandboxMocker(options: SandboxMockerOptions = {}): SandboxMocker {\n  return new SandboxMocker(options);\n}\n","/**\n * Core mocking utilities for agentic-control testing.\n *\n * This module provides the main `AgenticMocker` class that wraps Vitest's\n * mocking capabilities and provides convenience methods for mocking\n * agentic-control components.\n *\n * @module mocking\n */\n\nimport { type Mock, vi } from 'vitest';\nimport { createMcpMocker, type McpMocker, type McpMockerOptions } from './mcp.js';\nimport {\n  createProviderMocker,\n  type ProviderMocker,\n  type ProviderMockerOptions,\n} from './providers.js';\nimport { createSandboxMocker, type SandboxMocker, type SandboxMockerOptions } from './sandbox.js';\n\n/**\n * Options for creating an AgenticMocker instance.\n */\nexport interface AgenticMockerOptions {\n  /** Options for MCP mocking */\n  mcp?: McpMockerOptions;\n  /** Options for provider mocking */\n  providers?: ProviderMockerOptions;\n  /** Options for sandbox mocking */\n  sandbox?: SandboxMockerOptions;\n}\n\n/**\n * Main mocker class for comprehensive agentic-control testing.\n *\n * This class provides a unified interface for mocking all agentic-control\n * components: MCP servers, AI providers, sandbox execution, and more.\n *\n * @example Basic usage\n * ```typescript\n * import { AgenticMocker } from 'vitest-agentic-control';\n *\n * const mocker = new AgenticMocker();\n *\n * // Mock MCP server\n * mocker.mcp.mockServer('my-server', {\n *   tools: [{ name: 'tool1', handler: () => 'result' }],\n * });\n *\n * // Mock AI provider\n * mocker.providers.mockAnthropic({ response: 'Hello!' });\n *\n * // Mock sandbox execution\n * mocker.sandbox.mockExecution({ success: true, output: 'Done!' });\n *\n * // Clean up after test\n * mocker.restoreAll();\n * ```\n */\nexport class AgenticMocker {\n  /** MCP mocking utilities */\n  public readonly mcp: McpMocker;\n  /** AI provider mocking utilities */\n  public readonly providers: ProviderMocker;\n  /** Sandbox execution mocking utilities */\n  public readonly sandbox: SandboxMocker;\n\n  /** Track all mocked modules for cleanup */\n  private readonly mockedModules: Map<string, unknown> = new Map();\n  /** Track original module values */\n  private readonly originalModules: Map<string, unknown> = new Map();\n\n  /**\n   * Creates a new AgenticMocker instance.\n   *\n   * @param options - Configuration options for the mocker\n   */\n  constructor(options: AgenticMockerOptions = {}) {\n    this.mcp = createMcpMocker(options.mcp);\n    this.providers = createProviderMocker(options.providers);\n    this.sandbox = createSandboxMocker(options.sandbox);\n  }\n\n  /**\n   * Mock a module by path.\n   *\n   * @param modulePath - The module path to mock\n   * @param mockValue - The mock value to use\n   * @returns The mock value for chaining\n   */\n  mockModule<T extends Record<string, unknown>>(modulePath: string, mockValue: T): T {\n    vi.doMock(modulePath, () => mockValue as Partial<T>);\n    this.mockedModules.set(modulePath, mockValue);\n    return mockValue;\n  }\n\n  /**\n   * Create a spy on a function.\n   *\n   * @param implementation - Optional implementation for the spy\n   * @returns The mock function\n   */\n  createSpy<T extends (...args: unknown[]) => unknown>(implementation?: T): Mock<T> {\n    return vi.fn(implementation);\n  }\n\n  /**\n   * Mock all agentic-control framework modules.\n   *\n   * This mocks the common modules used in agentic-control:\n   * - MCP SDK modules\n   * - AI SDK modules\n   * - GitHub client modules\n   *\n   * @returns Dictionary of all mocked modules\n   */\n  mockAllFrameworks(): Record<string, unknown> {\n    const mocks: Record<string, unknown> = {};\n\n    // Mock MCP modules\n    const mcpMocks = this.mcp.mockAllModules();\n    Object.assign(mocks, mcpMocks);\n\n    // Mock provider modules\n    const providerMocks = this.providers.mockAllModules();\n    Object.assign(mocks, providerMocks);\n\n    return mocks;\n  }\n\n  /**\n   * Mock the GitHub client.\n   *\n   * @param options - Options for the mock\n   * @returns The mock GitHub client\n   */\n  mockGitHubClient(\n    options: { issues?: unknown[]; pullRequests?: unknown[]; repositories?: unknown[] } = {}\n  ): unknown {\n    const mockClient = {\n      issues: {\n        list: vi.fn().mockResolvedValue({ data: options.issues ?? [] }),\n        get: vi.fn().mockResolvedValue({ data: options.issues?.[0] ?? {} }),\n        create: vi.fn().mockResolvedValue({ data: { id: 1, number: 1 } }),\n        update: vi.fn().mockResolvedValue({ data: {} }),\n      },\n      pulls: {\n        list: vi.fn().mockResolvedValue({ data: options.pullRequests ?? [] }),\n        get: vi.fn().mockResolvedValue({ data: options.pullRequests?.[0] ?? {} }),\n        create: vi.fn().mockResolvedValue({ data: { id: 1, number: 1 } }),\n      },\n      repos: {\n        get: vi.fn().mockResolvedValue({ data: options.repositories?.[0] ?? {} }),\n        listForOrg: vi.fn().mockResolvedValue({ data: options.repositories ?? [] }),\n      },\n    };\n\n    this.mockModule('@octokit/rest', { Octokit: vi.fn().mockReturnValue(mockClient) });\n    return mockClient;\n  }\n\n  /**\n   * Mock environment variables temporarily.\n   *\n   * @param env - Environment variables to set\n   * @returns Cleanup function to restore original values\n   */\n  mockEnv(env: Record<string, string>): () => void {\n    const original: Record<string, string | undefined> = {};\n\n    for (const [key, value] of Object.entries(env)) {\n      original[key] = process.env[key];\n      process.env[key] = value;\n    }\n\n    return () => {\n      for (const [key, value] of Object.entries(original)) {\n        if (value === undefined) {\n          delete process.env[key];\n        } else {\n          process.env[key] = value;\n        }\n      }\n    };\n  }\n\n  /**\n   * Restore all mocked modules to their original values.\n   */\n  restoreAll(): void {\n    // Clear our module tracking\n    this.mockedModules.clear();\n    this.originalModules.clear();\n\n    // Restore sub-mockers\n    this.mcp.restoreAll();\n    this.providers.restoreAll();\n    this.sandbox.restoreAll();\n\n    // Clear all mocks and reset module cache\n    vi.clearAllMocks();\n    vi.resetModules();\n  }\n\n  /**\n   * Reset all mocks without restoring.\n   */\n  resetAll(): void {\n    vi.resetAllMocks();\n    this.mcp.resetAll();\n    this.providers.resetAll();\n    this.sandbox.resetAll();\n  }\n}\n\n/**\n * Factory function to create an AgenticMocker instance.\n *\n * @param options - Configuration options\n * @returns A new AgenticMocker instance\n *\n * @example\n * ```typescript\n * import { createAgenticMocker } from 'vitest-agentic-control';\n *\n * const mocker = createAgenticMocker();\n * mocker.mcp.mockServer('test', { tools: [] });\n * ```\n */\nexport function createAgenticMocker(options: AgenticMockerOptions = {}): AgenticMocker {\n  return new AgenticMocker(options);\n}\n"]}